---
import '../styles/global.css';

interface Props {
  title: string;
  description?: string;
  image?: string;
  canonicalUrl?: string;
  type?: 'website' | 'article';
  publishedTime?: string;
  modifiedTime?: string;
}

const { 
  title, 
  description = 'Discover the best AI video generation models. Compare features, pricing, and capabilities of leading AI video tools like Sora, Runway, Pika, and more.',
  image = '/og-image.png',
  canonicalUrl,
  type = 'website',
  publishedTime,
  modifiedTime
} = Astro.props;

const siteUrl = 'https://ai-video-directory.dev';
const fullUrl = canonicalUrl || `${siteUrl}${Astro.url.pathname}`;
const fullImageUrl = image.startsWith('http') ? image : `${siteUrl}${image}`;

// Format date for JSON-LD
const formatDate = (date: string | undefined) => date ? new Date(date).toISOString() : undefined;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <meta name="generator" content={Astro.generator} />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href={fullUrl} />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content={type} />
    <meta property="og:url" content={fullUrl} />
    <meta property="og:title" content={`${title} | AI Video Models Directory`} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={fullImageUrl} />
    <meta property="og:site_name" content="AI Video Models Directory" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content={fullUrl} />
    <meta name="twitter:title" content={`${title} | AI Video Models Directory`} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={fullImageUrl} />
    
    <!-- Article specific meta -->
    {type === 'article' && publishedTime && (
      <meta property="article:published_time" content={formatDate(publishedTime)} />
    )}
    {type === 'article' && modifiedTime && (
      <meta property="article:modified_time" content={formatDate(modifiedTime)} />
    )}
    
    <!-- Additional SEO -->
    <meta name="robots" content="index, follow" />
    <meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1" />
    
    <!-- Fonts - Preload critical fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link 
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" 
      rel="stylesheet"
      media="print"
      onload="this.media='all'"
    />
    
    <!-- DNS Prefetch for external resources -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com" />
    <link rel="dns-prefetch" href="https://fonts.gstatic.com" />
    
    <title>{title} | AI Video Models Directory</title>
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json" set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "AI Video Models Directory",
      "description": "Comprehensive directory of AI video generation models",
      "url": siteUrl,
      "potentialAction": {
        "@type": "SearchAction",
        "target": {
          "@type": "EntryPoint",
          "urlTemplate": `${siteUrl}/?search={search_term_string}`
        },
        "query-input": "required name=search_term_string"
      }
    })} />
    
    <script type="application/ld+json" set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "AI Video Models Directory",
      "url": siteUrl,
      "logo": `${siteUrl}/favicon.svg`,
      "sameAs": []
    })} />
  </head>
  <body class="min-h-screen flex flex-col">
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-indigo-500 text-white px-4 py-2 rounded-lg z-50 focus:outline-none focus:ring-2 focus:ring-indigo-400">
      Skip to main content
    </a>
    
    <!-- Header -->
    <header class="sticky top-0 z-40 border-b border-slate-700/50 bg-slate-900/95 backdrop-blur-md supports-backdrop-blur:bg-slate-900/80">
      <nav class="container mx-auto px-4 sm:px-6 lg:px-8" aria-label="Main navigation">
        <div class="flex items-center justify-between h-16">
          <!-- Logo -->
          <a href="/" class="flex items-center gap-2 group" aria-label="AI Video Directory - Home">
            <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 via-purple-500 to-cyan-500 flex items-center justify-center shadow-lg shadow-indigo-500/20">
              <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
            </div>
            <span class="text-xl font-bold group-hover:text-indigo-400 transition-colors duration-200">
              AI Video <span class="gradient-text">Directory</span>
            </span>
          </a>
          
          <!-- Desktop Navigation -->
          <div class="hidden md:flex items-center gap-1">
            <a href="/" class="nav-link px-4 py-2 rounded-lg hover:bg-slate-800 transition-all duration-200">Models</a>
            <a href="/categories" class="nav-link px-4 py-2 rounded-lg hover:bg-slate-800 transition-all duration-200">Categories</a>
            <a href="/compare" class="nav-link px-4 py-2 rounded-lg hover:bg-slate-800 transition-all duration-200">Compare</a>
            <a href="/pricing" class="nav-link px-4 py-2 rounded-lg hover:bg-slate-800 transition-all duration-200">Pricing</a>
          </div>
          
          <!-- Mobile Menu Button -->
          <button 
            id="mobile-menu-button"
            class="md:hidden p-2 rounded-lg hover:bg-slate-800 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500"
            aria-label="Toggle menu"
            aria-expanded="false"
            aria-controls="mobile-menu"
          >
            <svg class="w-6 h-6 menu-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
            <svg class="w-6 h-6 close-icon hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        
        <!-- Mobile Navigation -->
        <div id="mobile-menu" class="hidden md:hidden pb-4" role="menu">
          <div class="flex flex-col gap-1 pt-4 border-t border-slate-700/50">
            <a href="/" class="nav-link py-3 px-4 rounded-lg hover:bg-slate-800 transition-all duration-200" role="menuitem">Models</a>
            <a href="/categories" class="nav-link py-3 px-4 rounded-lg hover:bg-slate-800 transition-all duration-200" role="menuitem">Categories</a>
            <a href="/compare" class="nav-link py-3 px-4 rounded-lg hover:bg-slate-800 transition-all duration-200" role="menuitem">Compare</a>
            <a href="/pricing" class="nav-link py-3 px-4 rounded-lg hover:bg-slate-800 transition-all duration-200" role="menuitem">Pricing</a>
          </div>
        </div>
      </nav>
    </header>
    
    <!-- Main Content -->
    <main id="main-content" class="flex-1">
      <slot />
    </main>
    
    <!-- Footer -->
    <footer class="border-t border-slate-700/50 bg-slate-900/50">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <!-- Brand -->
          <div class="md:col-span-2">
            <div class="flex items-center gap-2 mb-4">
              <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 via-purple-500 to-cyan-500 flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                </svg>
              </div>
              <span class="text-xl font-bold">AI Video Directory</span>
            </div>
            <p class="text-slate-400 max-w-md leading-relaxed">
              Your comprehensive guide to AI video generation models. Compare features, pricing, and find the perfect tool for your creative needs.
            </p>
          </div>
          
          <!-- Quick Links -->
          <div>
            <h3 class="font-semibold text-white mb-4">Quick Links</h3>
            <ul class="space-y-2">
              <li><a href="/" class="text-slate-400 hover:text-white transition-colors duration-200">All Models</a></li>
              <li><a href="/categories" class="text-slate-400 hover:text-white transition-colors duration-200">Categories</a></li>
              <li><a href="/compare" class="text-slate-400 hover:text-white transition-colors duration-200">Compare</a></li>
              <li><a href="/pricing" class="text-slate-400 hover:text-white transition-colors duration-200">Pricing</a></li>
            </ul>
          </div>
          
          <!-- Categories -->
          <div>
            <h3 class="font-semibold text-white mb-4">Categories</h3>
            <ul class="space-y-2">
              <li><a href="/categories/text-to-video" class="text-slate-400 hover:text-white transition-colors duration-200">Text-to-Video</a></li>
              <li><a href="/categories/image-to-video" class="text-slate-400 hover:text-white transition-colors duration-200">Image-to-Video</a></li>
              <li><a href="/categories/video-to-video" class="text-slate-400 hover:text-white transition-colors duration-200">Video-to-Video</a></li>
              <li><a href="/categories/animation" class="text-slate-400 hover:text-white transition-colors duration-200">Animation</a></li>
            </ul>
          </div>
        </div>
        
        <!-- Bottom Bar -->
        <div class="border-t border-slate-700/50 mt-8 pt-8 flex flex-col sm:flex-row justify-between items-center gap-4">
          <p class="text-slate-400 text-sm">
            Â© {new Date().getFullYear()} AI Video Directory. All rights reserved.
          </p>
          <p class="text-slate-500 text-sm">
            Last updated: February 2026
          </p>
        </div>
      </div>
    </footer>
    
    <!-- Mobile Menu Script -->
    <script>
      const mobileMenuButton = document.getElementById('mobile-menu-button');
      const mobileMenu = document.getElementById('mobile-menu');
      const menuIcon = mobileMenuButton?.querySelector('.menu-icon');
      const closeIcon = mobileMenuButton?.querySelector('.close-icon');
      
      if (mobileMenuButton && mobileMenu) {
        mobileMenuButton.addEventListener('click', () => {
          const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
          mobileMenuButton.setAttribute('aria-expanded', (!isExpanded).toString());
          mobileMenu.classList.toggle('hidden');
          menuIcon?.classList.toggle('hidden');
          closeIcon?.classList.toggle('hidden');
        });
        
        // Close menu on escape key
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && !mobileMenu.classList.contains('hidden')) {
            mobileMenuButton.setAttribute('aria-expanded', 'false');
            mobileMenu.classList.add('hidden');
            menuIcon?.classList.remove('hidden');
            closeIcon?.classList.add('hidden');
          }
        });
      }
    </script>
  </body>
</html>
